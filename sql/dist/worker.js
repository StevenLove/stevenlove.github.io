(()=>{"use strict";var t={37:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=[];n[0]=function(){return function(){}},n[1]=function(t,e){return void 0===e?t:function(n){t(n,e)}};var r=function(){function t(){this.hasHandlers=!1,this._handlers=[],this._contexts=[],this._createDispatcher()}return t.prototype.addHandler=function(t,e){return this.isHandlerAttached(t,e)||(this._handlers.push(t),this._contexts.push(e),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.removeHandler=function(t,e){var n=this._getHandlerIndex(t,e);return void 0!==n&&(this._handlers.splice(n,1),this._contexts.splice(n,1),this._createDispatcher(),this._updateHasHandlers()),this},t.prototype.isHandlerAttached=function(t,e){return void 0!==this._getHandlerIndex(t,e)},t.prototype._updateHasHandlers=function(){this.hasHandlers=!!this._handlers.length},t.prototype._getHandlerIndex=function(t,e){var n,r=this._handlers.length;for(n=0;n<r&&(this._handlers[n]!==t||this._contexts[n]!==e);n++);return n<r?n:void 0},t.prototype._createDispatcher=function(){var t;this.dispatch=(t=this._handlers.length,n[t]||(n[t]=function(t){for(var e="return function dispatcher"+t+"(payload) {\n",n=[],r=[],i=0;i<t;i++)n.push("cb"+i),r.push("ctx"+i),e+="    cb"+i+"(payload, ctx"+i+");\n";return e+="};",new(Function.bind.apply(Function,[void 0].concat(n.concat(r),[e])))}(t)),n[t]).apply(this,this._handlers.concat(this._contexts))},t}();e.default=r},819:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(37);e.Event=r.default},520:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var r=n(819),i="resolve_transaction",a="reject_transaction",s="error",o=function(){function t(t,e){void 0===e&&(e=0),this._dispatch=t,this._rpcTimeout=e,this.error=new r.Event,this._rpcHandlers={},this._signalHandlers={},this._pendingTransactions={},this._nextTransactionId=0}return t.prototype.dispatch=function(e){var n=e;switch(n.type){case t.MessageType.signal:return this._handleSignal(n);case t.MessageType.rpc:return this._handeRpc(n);case t.MessageType.internal:return this._handleInternal(n);default:this._raiseError("invalid message type "+n.type)}},t.prototype.rpc=function(e,n,r){var i=this,a=this._nextTransactionId++;return this._dispatch({type:t.MessageType.rpc,transactionId:a,id:e,payload:n},r||void 0),new Promise((function(t,e){var n=i._pendingTransactions[a]={id:a,resolve:t,reject:e};i._rpcTimeout>0&&(i._pendingTransactions[a].timeoutHandle=setTimeout((function(){return i._transactionTimeout(n)}),i._rpcTimeout))}))},t.prototype.signal=function(e,n,r){return this._dispatch({type:t.MessageType.signal,id:e,payload:n},r||void 0),this},t.prototype.registerRpcHandler=function(t,e){if(this._rpcHandlers[t])throw new Error("rpc handler for "+t+" already registered");return this._rpcHandlers[t]=e,this},t.prototype.registerSignalHandler=function(t,e){return this._signalHandlers[t]||(this._signalHandlers[t]=[]),this._signalHandlers[t].push(e),this},t.prototype.deregisterRpcHandler=function(t,e){return this._rpcHandlers[t]&&delete this._rpcHandlers[t],this},t.prototype.deregisterSignalHandler=function(t,e){return this._signalHandlers[t]&&(this._signalHandlers[t]=this._signalHandlers[t].filter((function(t){return e!==t}))),this},t.prototype._raiseError=function(e){this.error.dispatch(new Error(e)),this._dispatch({type:t.MessageType.internal,id:s,payload:e})},t.prototype._handleSignal=function(t){if(!this._signalHandlers[t.id])return this._raiseError("invalid signal "+t.id);this._signalHandlers[t.id].forEach((function(e){return e(t.payload)}))},t.prototype._handeRpc=function(e){var n=this;if(!this._rpcHandlers[e.id])return this._raiseError("invalid rpc "+e.id);Promise.resolve(this._rpcHandlers[e.id](e.payload)).then((function(r){return n._dispatch({type:t.MessageType.internal,id:i,transactionId:e.transactionId,payload:r})}),(function(r){return n._dispatch({type:t.MessageType.internal,id:a,transactionId:e.transactionId,payload:r})}))},t.prototype._handleInternal=function(t){var e=void 0!==t.transactionId?this._pendingTransactions[t.transactionId]:void 0;switch(t.id){case i:if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);e.resolve(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case a:if(!e||void 0===t.transactionId)return this._raiseError("no pending transaction with id "+t.transactionId);this._pendingTransactions[t.transactionId].reject(t.payload),this._clearTransaction(this._pendingTransactions[t.transactionId]);break;case s:this.error.dispatch(new Error("remote error: "+t.payload));break;default:this._raiseError("unhandled internal message "+t.id)}},t.prototype._transactionTimeout=function(t){t.reject("transaction timed out"),this._raiseError("transaction "+t.id+" timed out"),delete this._pendingTransactions[t.id]},t.prototype._clearTransaction=function(t){void 0!==t.timeoutHandle&&clearTimeout(t.timeoutHandle),delete this._pendingTransactions[t.id]},t}();!function(t){var e;(e=t.MessageType||(t.MessageType={}))[e.signal=0]="signal",e[e.rpc=1]="rpc",e[e.internal=2]="internal"}(o||(o={})),e.default=o},158:(t,e,n)=>{var r=n(520);e.G=r.default}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}(()=>{const t=function(t,e,n){return n.indexOf(t)===e};var e=n(158);let r=[];const i=new e.G(((t,e)=>postMessage(t,e)));onmessage=t=>i.dispatch(t.data),i.registerRpcHandler("dict",(t=>(r=t,!0))),i.registerRpcHandler("regexp",(e=>{let n=(new Date).getTime(),i=r.filter((t=>e.test(t))),a=(new Date).getTime();console.log("took",(a-n)/1e3,"seconds to filter by",e);let s=i.length;s>500&&(i=i.slice(0,500),i.push(s-500+" more results not shown...")),i=i.filter(t);let o=(new Date).getTime();return console.log("took",(o-a)/1e3,"seconds to filter out duplicates"),i}))})()})();